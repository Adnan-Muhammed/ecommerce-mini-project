<%-include('header')-%>


<div id="page-content">
  <!--Collection Banner-->
    <div class="slideshow slideshow-wrapper pb-4">
    <div class="home-slideshow">
        <div class="slide">
            <div class="blur-up lazyload">
                <img class="blur-up lazyload desktop-show" data-src="/assets/images/slideshow-banners/home3-banner.jpg" src="/assets/images/slideshow-banners/home3-banner.jpg" alt="There is Beauty in Simplycity" title="There is Beauty in Simplycity" />
                <img class="blur-up lazyload mobile-show" data-src="/assets/images/slideshow-banners/home3-banner-mobile.jpg" src="/assets/images/slideshow-banners/home3-banner-mobile.jpg" alt="There is Beauty in Simplycity" title="There is Beauty in Simplycity" />
                <div class="slideshow__text-wrap slideshow__overlay classic middle">
                    <div class="slideshow__text-content left">
                        <div class="container">
                            <div class="wrap-caption left">
                                <h2 class="h1 mega-title slideshow__title">There is Beauty in Simplycity</h2>
                                <span class="mega-subtitle slideshow__subtitle">Save up to 50% off this weekend only</span>
                                <span class="btn">Shop now</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
 </div>

    <!--End Collection Banner-->
    <div clets="containe-fluid" >
      <div class="row">
        <!-- <nav class="grid__item" id="AccessibleNav">for mobile -->
            <ul id="siteNav" class="site-nav medium center hidearrow">
                    <li class="lvl1 parent dropdown">
                        <a >price sort
                            <i class="anm anm-angle-down-l"></i>
                        </a>
                        <ul class="dropdown">
                                <li>
                                    <div class="price-filter">
                                        <div id="slider-range" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
                                            <div class="ui-slider-range ui-widget-header ui-corner-all">

                                            </div>
                                            <span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0"></span>
                                            <span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0"></span>
                                        </div>
                                        <div class="row">
                                            <div class="col-6">
                                                <p class="no-margin"><input id="amount" name="priceValue" type="text" style="background-color: darkslategray; color: beige;"></p>
                                            </div>
                                            <div class="col-6 text-right margin-20px-top " >
                                                <button class="btn btn-secondary btn--small" id="btn-1"  style="background-color: darkslategray; ">
                                                    <p style="font-size: 11px; color: beige; ">High to Low</p>
                                                </button>
                                                <button class="btn btn-secondary btn--small" id="btn-2"  style="background-color: darkslategray;">
                                                    <p style="font-size: 11px;  color: beige;">Low to High</p>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                        </ul>
                        <li class="lvl1 parent dropdown">
                            <a >Search
                            </a>
                            <ul class="dropdown" style="background-color: rgb(249, 251, 251); width: 150px;">
                                <div class="form-group has-search"  >
                                    <input  class="fa fa-search form-control-feedback" type="text" class="form-control" placeholder="Search" style="border: 0cm; color: rgb(15, 5, 5);">
                                    <button class="btn btn-secondary btn--small"   style="background-color: darkslategray;">
                                        <p style="font-size: 11px;  color: beige;">Enter</p>
                                    </button>
                                </div>
                            </ul>
                        </li>              
            </ul>
              <div class="productList product-load-more" >
                    <div class="grid-products grid--view-items">
                            <div class="row" style="display: flex; justify-content: center; align-items: center; overflow: hidden;" id="orginalList1">
                                    <% product.forEach((product) => { %>
                                        <div class="col-lg-2 col-md-4 col-sm-4 col-5  item  m-2 rounded-top rounded-bottom "     style="background-color: lightblue; ">

                                            <div class="product-image mt-2 rounded-top rounded-bottom ">
                                                <a href="/productdetails/<%=product._id%>">
                                                    <img class="primary blur-up lazyload " data-src="<%=product.image[0]%>" src="<%=product.image[0]%>"   alt="image" title="product" >/>
                                                    <img class="hover blur-up lazyload "  data-src="<%=product.image[1]%>" src="<%product.image[0]%>" alt="image" title="product" >/>
                                                </a>
                                                <form class="variants add" action="#" onclick="window.location.href='cart.html'"method="post">
                                                    <button class="btn btn-addto-cart" type="button">Add to cart</button>
                                                </form>
                                                <div class="button-set">
                                                    <div class="wishlist-btn">
                                                        <a class="wishlist add-to-wishlist" href="#" title="Add to Wishlist">
                                                            <i class="icon anm anm-heart-l"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="product-details text-center">
                                                <div class="product-name">
                                                    <p><%=product.name%></p>
                                                </div>
                                                
                                                <div class="product-price">
                                                    <span class="price"><%=product.price%></span>
                                                </div>
                                                
                                                <div class="product-review">
                                                    <i class="font-13 fa fa-star-o"></i>
                                                    <i class="font-13 fa fa-star-o"></i>
                                                    <i class="font-13 fa fa-star-o"></i>
                                                    <i class="font-13 fa fa-star-o"></i>
                                                    <i class="font-13 fa fa-star-o"></i>
                                                </div>
                                            </div>
                                        </div>
                                    <% }) %>
                        </div>
                    </div>
                </div>
                </div>
                
            <div class="infinitpaginOuter" style="display: flex; justify-content: center;">
                <div class="infinitpagin  ">	
                    <% if (totalPages > 1) { %>
                        <ul class="pagination ">
                            <% for (let i = 1; i <= totalPages; i++) { %>
                                <li class="btn-dark page-item <%= i === currentPage ? 'active' : '' %>"  style="background-color: aliceblue;">
                                    <a class="page-link" style="margin: 2px; "  href="?page=<%= i %>">
                                        <p style="font-size: 15px; color: black;" ><%= i %></p>
                                    </a>
                                </li>
                            <% } %>
                        </ul>
                    <% } %>
                </div>
            </div>

            <!--End Main Content-->
        </div>
    </div>
    
</div>





<script>
    document.addEventListener('DOMContentLoaded', function() {

        document.getElementById('btn-1').addEventListener('click', function() {
            const value = document.getElementById('amount').value.trim();
            fetchData('/category/<%=categoryName%>/ascending', value);
        });

        document.getElementById('btn-2').addEventListener('click', function() {
            const value = document.getElementById('amount').value.trim();
            fetchData('/category/<%=categoryName%>/descending', value);
        });

        const fetchData = async (url, value) => {
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ value }),
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const ascendingProducts = await response.json();
                console.log(ascendingProducts);

                const productListContainer = document.getElementById('orginalList1');
                productListContainer.innerHTML = '<h1>hai</h1>'; // Clear existing content

                ascendingProducts.forEach(product => {
                productListContainer.innerHTML += 
                ` <div class="row" style="display: flex; justify-content: center; align-items: center; overflow: hidden;" id="orginalList1">
                                    
                    <div class="col-lg-2 col-md-4 col-sm-4 col-5  item  m-2 rounded-top rounded-bottom "     style="background-color: lightblue; ">

                        <div class="product-image mt-2 rounded-top rounded-bottom ">
                            <a href="/productdetails/${product._id}">
                                <img class="primary blur-up lazyload " data-src="${product.image[0]}" src="${product.image[0]}"   alt="image" title="product" >/>
                                <img class="hover blur-up lazyload "  data-src="${product.image[1]}" src="${product.image[0]}" alt="image" title="product" >/>
                            </a>
                            <form class="variants add" action="#" onclick="window.location.href='cart.html'"method="post">
                                <button class="btn btn-addto-cart" type="button">Add to cart</button>
                            </form>
                            <div class="button-set">
                                <div class="wishlist-btn">
                                    <a class="wishlist add-to-wishlist" href="#" title="Add to Wishlist">
                                        <i class="icon anm anm-heart-l"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="product-details text-center">
                            <div class="product-name">
                                <p>${product.name}</p>
                            </div>
                                                
                            <div class="product-price">
                                <span class="price">${product.price}</span>
                            </div>
                                                
                            <div class="product-review">
                                <i class="font-13 fa fa-star-o"></i>
                                <i class="font-13 fa fa-star-o"></i>
                                <i class="font-13 fa fa-star-o"></i>
                                <i class="font-13 fa fa-star-o"></i>
                                <i class="font-13 fa fa-star-o"></i>
                            </div>
                        </div>
                    </div>
                </div>`
                })
            } catch (error) {
                console.error('Error:', error);
            }
        };
        });
    

    
</script>



<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<%-include('footer')-%>
    </body>
    </html>